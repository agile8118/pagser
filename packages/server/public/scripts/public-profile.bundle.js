"use strict";(self.webpackChunk_pagser_web=self.webpackChunk_pagser_web||[]).push([[318],{1143:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(2322),r=n(2784),s=n(2833),i=function(){return i=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};const c=function(e){var t=e.pageNum&&e.pageNum>1?"".concat(e.pageNum," pages"):"".concat(e.pageNum||0," page"),n=(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("div",i({className:"collection-thumbnail__photo"},{children:[(0,a.jsx)("img",{src:e.img,onError:function(e){e.target.src="/images/collection-placeholder.svg"}}),(0,a.jsxs)("div",i({className:"collection-thumbnail__num-label"},{children:[t," ",e.pageNum>0&&(0,a.jsx)("i",{className:"fa fa-newspaper-o","aria-hidden":"true"})]})),(0,a.jsxs)("div",i({className:"collection-thumbnail__view-label"},{children:[(0,a.jsx)("i",{className:"fa fa-eye","aria-hidden":"true"}),"View"]}))]})),(0,a.jsxs)("div",i({className:"collection-thumbnail__details"},{children:[(0,a.jsx)("div",i({className:"collection-thumbnail__name"},{children:e.name})),(0,a.jsx)("div",i({className:"collection-thumbnail__desc"},{children:e.desc})),(0,a.jsx)("div",i({className:"collection-thumbnail__author"},{children:e.author}))]}))]});return(0,a.jsx)("div",i({className:"collection-thumbnail",onClick:e.onClick},{children:e.refresh?(0,a.jsx)("a",i({href:"/collection/".concat(e.id),target:e.target},{children:n})):(0,a.jsx)(s.rU,i({to:"/collection/".concat(e.id)},{children:n}))}))}},2563:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(2322),r=function(){return r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};const s=function(e){if(e.noPhoto){var t=e.briefDes,n=e.title,s="",i="",c=e.target;return e.title.length>25&&(n=e.title.substring(0,25)+"..."),e.briefDes.length>35&&(t=e.briefDes.substring(0,35)+"..."),0===e.briefDes.length&&(t=(0,a.jsx)("em",{children:"No brief description provided."})),"draft"===e.type&&(s="/new-page/page-contents?id=".concat(e.id)),"normal"!==e.status&&e.status?"editing"===e.status&&(i="page-thumbnail page-thumbnail-no-photo page-thumbnail--shaking",s="javascript:void(0)",c="_self"):i="page-thumbnail page-thumbnail-no-photo","editing"===e.status&&e.selected&&(i+=" page-thumbnail--selected"),(0,a.jsx)("div",r({className:i,onClick:e.onClick},{children:(0,a.jsxs)("a",r({href:s,target:c},{children:[(0,a.jsxs)("div",r({className:"page-thumbnail__details"},{children:[(0,a.jsx)("h4",{children:n}),(0,a.jsx)("p",{children:t})]})),e.label&&(0,a.jsx)("span",r({className:"page-thumbnail__type"},{children:e.label}))]}))}))}var l=e.briefDes,o=e.title,u="",d="",p=e.target;return"private"===e.type?u="/".concat(e.authorUsername,"/").concat(e.url):"public"===e.type&&(u="/public-pages/".concat(e.url)),e.title.length>25&&(o=e.title.substring(0,25)+"..."),e.briefDes.length>35&&(l=e.briefDes.substring(0,35)+"..."),0===e.briefDes.length&&(l=(0,a.jsx)("em",{children:"No brief description provided."})),"normal"!==e.status&&e.status?"editing"===e.status&&(d="page-thumbnail page-thumbnail--shaking",u="javascript:void(0)",p="_self"):d="page-thumbnail","editing"===e.status&&e.selected&&(d+=" page-thumbnail--selected"),(0,a.jsx)("div",r({className:d,onClick:e.onClick},{children:(0,a.jsxs)("a",r({href:u,target:p},{children:[(0,a.jsx)("div",r({className:"page-thumbnail__photo"},{children:(0,a.jsx)("img",{src:e.image,onError:function(e){e.target.src="/images/pages/placeholder.svg"}})})),(0,a.jsxs)("div",r({className:"page-thumbnail__details"},{children:[(0,a.jsx)("h4",{children:o}),(0,a.jsx)("p",{children:l})]})),(0,a.jsx)("span",r({className:"page-thumbnail__type"},{children:e.label?e.label:e.type}))]}))}))}},2617:(e,t,n)=>{n.d(t,{C9:()=>y,NH:()=>b,PS:()=>j,RW:()=>o,SG:()=>u,Tf:()=>p,Tz:()=>x,ZP:()=>N,Zp:()=>g,mW:()=>v,xN:()=>w});var a,r=n(8229),s=n(4819),i=function(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function c(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((a=a.apply(e,t||[])).next())}))},c=function(e,t){var n,a,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},l=(0,s.oM)({name:"Pages",initialState:{loading:!0,list:[],selected:[],status:"normal",sortBy:"date-added-asc",filterBy:"all"},reducers:{setLoading:function(e,t){e.loading=t.payload},setStatus:function(e,t){e.status=t.payload,e.selected=[]},setSortBy:function(e,t){e.sortBy=t.payload},setFilterBy:function(e,t){e.filterBy=t.payload},setList:function(e,t){e.list=t.payload},selectPage:function(e,t){var n=e.selected.indexOf(t.payload);-1===n?e.selected.push(t.payload):e.selected.splice(n,1)}}}),o=function(e,t,n){return function(a,s){return i(void 0,void 0,void 0,(function(){var s,i;return c(this,(function(c){switch(c.label){case 0:return a(d(!0)),s="PB-pages"===e?"/users/".concat(window.location.pathname.split("/")[2],"/pages"):"/".concat(e,"?sortBy=").concat(n,"&filterBy=").concat(t),[4,r.request.get(s,{auth:!0})];case 1:return i=c.sent(),a(m(i.results||i.pages)),t&&a(f(i.filterBy)),n&&a(h(i.sortBy)),a(d(!1)),[2]}}))}))}},u=function(e){return function(t,n){return i(void 0,void 0,void 0,(function(){var a;return c(this,(function(s){switch(s.label){case 0:return(0,r.loadingModal)("Loading..."),[4,r.request.delete("/".concat(e),{data:{ids:n().pages.selected},auth:!0})];case 1:return s.sent(),a=n().pages.list.filter((function(e){return-1===n().pages.selected.indexOf(e.id)})),t(m(a)),t(p("normal")),(0,r.loadingModal)(),"pages/draft"===n().sideNav.section?(0,r.alert)("Draft Page(s) successfully deleted.","success"):(0,r.alert)("Page(s) successfully removed from your list.","success"),[2]}}))}))}},d=(a=l.actions).setLoading,p=a.setStatus,h=a.setSortBy,f=a.setFilterBy,g=a.selectPage,m=a.setList,b=function(e){return e.pages.loading},v=function(e){return e.pages.status},y=function(e){return e.pages.sortBy},x=function(e){return e.pages.filterBy},j=function(e){return e.pages.selected},w=function(e){return e.pages.list};const N=l.reducer},8905:(e,t,n)=>{n.d(t,{Il:()=>s,ZP:()=>i,zc:()=>r});var a=(0,n(4819).oM)({name:"sideNav",initialState:{section:""},reducers:{setSection:function(e,t){e.section=t.payload}}}),r=a.actions.setSection,s=function(e){return e.sideNav.section};const i=a.reducer},481:(e,t,n)=>{n.d(t,{h:()=>i});var a=n(4819),r=n(8905),s=n(2617),i=(0,a.xC)({reducer:{sideNav:r.ZP,pages:s.ZP}})},3501:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(2322),r=n(2833),s=n(289),i=n(5185),c=n(481),l=n(2784),o=function(){return o=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};const u=function(){var e=window.location.pathname.split("/")[2],t=(0,l.useState)(""),n=t[0],s=t[1];(0,l.useEffect)((function(){s(i())}),[]);var i=function(){if("users"===window.location.pathname.split("/")[1]){if(!window.location.pathname.split("/")[3])return"home";if("collections"===window.location.pathname.split("/")[3])return"collections";if("pages"===window.location.pathname.split("/")[3])return"pages"}};return(0,a.jsxs)("div",o({className:"lined-btns-2"},{children:[(0,a.jsx)(r.rU,o({to:"/users/".concat(e,"/"),className:"btn-lined ".concat("home"===n?"btn-lined--active":""),onClick:function(){return s("home")}},{children:"Home"})),(0,a.jsx)(r.rU,o({to:"/users/".concat(e,"/pages"),className:"btn-lined ".concat("pages"===n?"btn-lined--active":""),onClick:function(){return s("pages")}},{children:"Pages"})),(0,a.jsx)(r.rU,o({to:"/users/".concat(e,"/collections"),className:"btn-lined ".concat("collections"===n?"btn-lined--active":""),onClick:function(){return s("collections")}},{children:"Collections"}))]}))};var d=function(){return d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)};const p=function(){return(0,a.jsx)("div",d({className:"pb-main"},{children:(0,a.jsx)("h3",d({className:"heading-tertiary center-content italic"},{children:"This part will be completed shortly!"}))}))};var h=n(2563),f=n(7289),g=n(2617),m=function(){return m=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},m.apply(this,arguments)};const b=function(){var e=(0,i.v9)(g.NH),t=(0,i.v9)(g.xN),n=(0,i.I0)();return(0,l.useEffect)((function(){n((0,g.RW)("PB-pages"))}),[]),(0,a.jsx)("div",m({className:"pb-main"},{children:(0,a.jsx)("div",m({className:"row"},{children:e?(0,a.jsx)("div",m({className:"center-content"},{children:(0,a.jsx)(f.Loading,{})})):null===t?(0,a.jsx)("div",m({className:"center-content"},{children:(0,a.jsx)("div",m({className:"a-14"},{children:"User doesn't have any public page."}))})):t.map((function(e){return(0,a.jsx)("div",m({className:"col-lg-1-of-5 col-md-1-of-5 col-sm-1-of-3 col-xs-1-of-2 col-xxs-1-of-1"},{children:(0,a.jsx)(h.Z,{status:"normal",id:e.id,briefDes:e.briefDes,title:e.title,image:e.photo,target:"_blank",url:e.url,type:"public",label:e.date})}),e.id)}))}))}))};var v=n(8229),y=n(1143),x=function(){return x=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},x.apply(this,arguments)};const j=function(){var e=(0,l.useState)([]),t=e[0],n=e[1];(0,l.useEffect)((function(){r()}),[]);var r=function(){return e=void 0,t=void 0,r=function(){var e;return function(e,t){var n,a,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){switch(t.label){case 0:return[4,v.request.get("/collections/shared/".concat(window.location.pathname.split("/")[2]),{auth:!0})];case 1:return e=t.sent(),n(e.collections),[2]}}))},new((a=void 0)||(a=Promise))((function(n,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function c(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}));var e,t,a,r};return(0,a.jsx)("div",x({className:"pb-main"},{children:(0,a.jsx)("div",x({className:"row"},{children:null===t?(0,a.jsx)("div",x({className:"center-content"},{children:(0,a.jsx)("div",x({className:"a-14"},{children:"User hasn't shared any collection."}))})):0===t.length?(0,a.jsx)("div",x({className:"center-content"},{children:(0,a.jsx)(f.Loading,{})})):t.map((function(e){return(0,a.jsx)("div",x({className:"col-lg-1-of-5 col-md-1-of-5 col-sm-1-of-3 col-xs-1-of-2 col-xxs-1-of-1"},{children:(0,a.jsx)(y.Z,{id:e._id,name:e.name,img:e.photo.secure_url,desc:e.description,pageNum:e.pages.length,author:e.user.name,refresh:!0,target:"_blank"})}),e._id)}))}))}))};var w=function(){return w=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},w.apply(this,arguments)};const N=function(){return(0,a.jsx)(i.zt,w({store:c.h},{children:(0,a.jsxs)(r.VK,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(s.Z5,{children:[(0,a.jsx)(s.AW,{path:"/users/:username/pages",element:(0,a.jsx)(b,{})}),(0,a.jsx)(s.AW,{path:"/users/:username/collections",element:(0,a.jsx)(j,{})}),(0,a.jsx)(s.AW,{path:"/users/:username",element:(0,a.jsx)(p,{})})]})]})}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxTQUFLLEVBQWEsQ0FBQyxNQUFPLFNBQUssS0FBTyxDQUFFRCxLQUFNLG1CQUFvQkMsU0FBUyxTQUFLLEVBQU0sQ0FBQyxhQUN6VyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQHBhZ3Nlci93ZWIvLi9zcmMvcGFydGlhbHMvQ29sbGVjdGlvblRodW1ibmFpbC50c3giLCJ3ZWJwYWNrOi8vQHBhZ3Nlci93ZWIvLi9zcmMvcGFydGlhbHMvUGFnZVRodW1ibmFpbC50c3giLCJ3ZWJwYWNrOi8vQHBhZ3Nlci93ZWIvLi9zcmMvdmlld3MvbGlicmFyeS9wYWdlc1NsaWNlLnRzIiwid2VicGFjazovL0BwYWdzZXIvd2ViLy4vc3JjL3ZpZXdzL2xpYnJhcnkvc2lkZS1uYXYvc2lkZU5hdlNsaWNlLnRzIiwid2VicGFjazovL0BwYWdzZXIvd2ViLy4vc3JjL3ZpZXdzL2xpYnJhcnkvc3RvcmUudHMiLCJ3ZWJwYWNrOi8vQHBhZ3Nlci93ZWIvLi9zcmMvdmlld3MvcHVibGljLXByb2ZpbGUvSGVhZGVyLnRzeCIsIndlYnBhY2s6Ly9AcGFnc2VyL3dlYi8uL3NyYy92aWV3cy9wdWJsaWMtcHJvZmlsZS9Ib21lLnRzeCIsIndlYnBhY2s6Ly9AcGFnc2VyL3dlYi8uL3NyYy92aWV3cy9wdWJsaWMtcHJvZmlsZS9QYWdlcy50c3giLCJ3ZWJwYWNrOi8vQHBhZ3Nlci93ZWIvLi9zcmMvdmlld3MvcHVibGljLXByb2ZpbGUvQ29sbGVjdGlvbnMudHN4Iiwid2VicGFjazovL0BwYWdzZXIvd2ViLy4vc3JjL3ZpZXdzL3B1YmxpYy1wcm9maWxlL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xudmFyIENvbGxlY3Rpb24gPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgbnVtVGV4dCA9IHByb3BzLnBhZ2VOdW0gJiYgcHJvcHMucGFnZU51bSA+IDFcbiAgICAgICAgPyBcIlwiLmNvbmNhdChwcm9wcy5wYWdlTnVtLCBcIiBwYWdlc1wiKVxuICAgICAgICA6IFwiXCIuY29uY2F0KHByb3BzLnBhZ2VOdW0gfHwgMCwgXCIgcGFnZVwiKTtcbiAgICB2YXIgY29udGVudCA9IChfanN4cyhSZWFjdC5GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcImNvbGxlY3Rpb24tdGh1bWJuYWlsX19waG90b1wiIH0sIHsgY2hpbGRyZW46IFtfanN4KFwiaW1nXCIsIHsgc3JjOiBwcm9wcy5pbWcsIG9uRXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3JjID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIvaW1hZ2VzL2NvbGxlY3Rpb24tcGxhY2Vob2xkZXIuc3ZnXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0pLCBfanN4cyhcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJjb2xsZWN0aW9uLXRodW1ibmFpbF9fbnVtLWxhYmVsXCIgfSwgeyBjaGlsZHJlbjogW251bVRleHQsIFwiIFwiLCBwcm9wcy5wYWdlTnVtID4gMCAmJiAoX2pzeChcImlcIiwgeyBjbGFzc05hbWU6IFwiZmEgZmEtbmV3c3BhcGVyLW9cIiwgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiB9KSldIH0pKSwgX2pzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiY29sbGVjdGlvbi10aHVtYm5haWxfX3ZpZXctbGFiZWxcIiB9LCB7IGNoaWxkcmVuOiBbX2pzeChcImlcIiwgeyBjbGFzc05hbWU6IFwiZmEgZmEtZXllXCIsIFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCIgfSksIFwiVmlld1wiXSB9KSldIH0pKSwgX2pzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiY29sbGVjdGlvbi10aHVtYm5haWxfX2RldGFpbHNcIiB9LCB7IGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJjb2xsZWN0aW9uLXRodW1ibmFpbF9fbmFtZVwiIH0sIHsgY2hpbGRyZW46IHByb3BzLm5hbWUgfSkpLCBfanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcImNvbGxlY3Rpb24tdGh1bWJuYWlsX19kZXNjXCIgfSwgeyBjaGlsZHJlbjogcHJvcHMuZGVzYyB9KSksIF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiY29sbGVjdGlvbi10aHVtYm5haWxfX2F1dGhvclwiIH0sIHsgY2hpbGRyZW46IHByb3BzLmF1dGhvciB9KSldIH0pKV0gfSkpO1xuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJjb2xsZWN0aW9uLXRodW1ibmFpbFwiLCBvbkNsaWNrOiBwcm9wcy5vbkNsaWNrIH0sIHsgY2hpbGRyZW46IHByb3BzLnJlZnJlc2ggPyAoX2pzeChcImFcIiwgX19hc3NpZ24oeyBocmVmOiBcIi9jb2xsZWN0aW9uL1wiLmNvbmNhdChwcm9wcy5pZCksIHRhcmdldDogcHJvcHMudGFyZ2V0IH0sIHsgY2hpbGRyZW46IGNvbnRlbnQgfSkpKSA6IChfanN4KExpbmssIF9fYXNzaWduKHsgdG86IFwiL2NvbGxlY3Rpb24vXCIuY29uY2F0KHByb3BzLmlkKSB9LCB7IGNoaWxkcmVuOiBjb250ZW50IH0pKSkgfSkpKTtcbn07XG5leHBvcnQgZGVmYXVsdCBDb2xsZWN0aW9uO1xuIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG52YXIgUGFnZVRodW1ibmFpbCA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIGlmIChwcm9wcy5ub1Bob3RvKSB7XG4gICAgICAgIHZhciBicmllZkRlc18xID0gcHJvcHMuYnJpZWZEZXM7XG4gICAgICAgIHZhciB0aXRsZV8xID0gcHJvcHMudGl0bGU7XG4gICAgICAgIHZhciB1cmxfMSA9IFwiXCI7XG4gICAgICAgIHZhciBjbGFzc05hbWVfMSA9IFwiXCI7XG4gICAgICAgIHZhciB0YXJnZXRfMSA9IHByb3BzLnRhcmdldDtcbiAgICAgICAgaWYgKHByb3BzLnRpdGxlLmxlbmd0aCA+IDI1KSB7XG4gICAgICAgICAgICB0aXRsZV8xID0gcHJvcHMudGl0bGUuc3Vic3RyaW5nKDAsIDI1KSArIFwiLi4uXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BzLmJyaWVmRGVzLmxlbmd0aCA+IDM1KSB7XG4gICAgICAgICAgICBicmllZkRlc18xID0gcHJvcHMuYnJpZWZEZXMuc3Vic3RyaW5nKDAsIDM1KSArIFwiLi4uXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BzLmJyaWVmRGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgYnJpZWZEZXNfMSA9IF9qc3goXCJlbVwiLCB7IGNoaWxkcmVuOiBcIk5vIGJyaWVmIGRlc2NyaXB0aW9uIHByb3ZpZGVkLlwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wcy50eXBlID09PSBcImRyYWZ0XCIpIHtcbiAgICAgICAgICAgIHVybF8xID0gXCIvbmV3LXBhZ2UvcGFnZS1jb250ZW50cz9pZD1cIi5jb25jYXQocHJvcHMuaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wcy5zdGF0dXMgPT09IFwibm9ybWFsXCIgfHwgIXByb3BzLnN0YXR1cykge1xuICAgICAgICAgICAgY2xhc3NOYW1lXzEgPSBcInBhZ2UtdGh1bWJuYWlsIHBhZ2UtdGh1bWJuYWlsLW5vLXBob3RvXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJvcHMuc3RhdHVzID09PSBcImVkaXRpbmdcIikge1xuICAgICAgICAgICAgY2xhc3NOYW1lXzEgPVxuICAgICAgICAgICAgICAgIFwicGFnZS10aHVtYm5haWwgcGFnZS10aHVtYm5haWwtbm8tcGhvdG8gcGFnZS10aHVtYm5haWwtLXNoYWtpbmdcIjtcbiAgICAgICAgICAgIHVybF8xID0gXCJqYXZhc2NyaXB0OnZvaWQoMClcIjtcbiAgICAgICAgICAgIHRhcmdldF8xID0gXCJfc2VsZlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wcy5zdGF0dXMgPT09IFwiZWRpdGluZ1wiICYmIHByb3BzLnNlbGVjdGVkKVxuICAgICAgICAgICAgY2xhc3NOYW1lXzEgKz0gXCIgcGFnZS10aHVtYm5haWwtLXNlbGVjdGVkXCI7XG4gICAgICAgIHJldHVybiAoX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lXzEsIG9uQ2xpY2s6IHByb3BzLm9uQ2xpY2sgfSwgeyBjaGlsZHJlbjogX2pzeHMoXCJhXCIsIF9fYXNzaWduKHsgaHJlZjogdXJsXzEsIHRhcmdldDogdGFyZ2V0XzEgfSwgeyBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcInBhZ2UtdGh1bWJuYWlsX19kZXRhaWxzXCIgfSwgeyBjaGlsZHJlbjogW19qc3goXCJoNFwiLCB7IGNoaWxkcmVuOiB0aXRsZV8xIH0pLCBfanN4KFwicFwiLCB7IGNoaWxkcmVuOiBicmllZkRlc18xIH0pXSB9KSksIHByb3BzLmxhYmVsICYmIChfanN4KFwic3BhblwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJwYWdlLXRodW1ibmFpbF9fdHlwZVwiIH0sIHsgY2hpbGRyZW46IHByb3BzLmxhYmVsIH0pKSldIH0pKSB9KSkpO1xuICAgIH1cbiAgICB2YXIgYnJpZWZEZXMgPSBwcm9wcy5icmllZkRlcztcbiAgICB2YXIgdGl0bGUgPSBwcm9wcy50aXRsZTtcbiAgICB2YXIgdXJsID0gXCJcIjtcbiAgICB2YXIgY2xhc3NOYW1lID0gXCJcIjtcbiAgICB2YXIgdGFyZ2V0ID0gcHJvcHMudGFyZ2V0O1xuICAgIGlmIChwcm9wcy50eXBlID09PSBcInByaXZhdGVcIikge1xuICAgICAgICB1cmwgPSBcIi9cIi5jb25jYXQocHJvcHMuYXV0aG9yVXNlcm5hbWUsIFwiL1wiKS5jb25jYXQocHJvcHMudXJsKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocHJvcHMudHlwZSA9PT0gXCJwdWJsaWNcIikge1xuICAgICAgICB1cmwgPSBcIi9wdWJsaWMtcGFnZXMvXCIuY29uY2F0KHByb3BzLnVybCk7XG4gICAgfVxuICAgIGlmIChwcm9wcy50aXRsZS5sZW5ndGggPiAyNSkge1xuICAgICAgICB0aXRsZSA9IHByb3BzLnRpdGxlLnN1YnN0cmluZygwLCAyNSkgKyBcIi4uLlwiO1xuICAgIH1cbiAgICBpZiAocHJvcHMuYnJpZWZEZXMubGVuZ3RoID4gMzUpIHtcbiAgICAgICAgYnJpZWZEZXMgPSBwcm9wcy5icmllZkRlcy5zdWJzdHJpbmcoMCwgMzUpICsgXCIuLi5cIjtcbiAgICB9XG4gICAgaWYgKHByb3BzLmJyaWVmRGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBicmllZkRlcyA9IF9qc3goXCJlbVwiLCB7IGNoaWxkcmVuOiBcIk5vIGJyaWVmIGRlc2NyaXB0aW9uIHByb3ZpZGVkLlwiIH0pO1xuICAgIH1cbiAgICBpZiAocHJvcHMuc3RhdHVzID09PSBcIm5vcm1hbFwiIHx8ICFwcm9wcy5zdGF0dXMpIHtcbiAgICAgICAgY2xhc3NOYW1lID0gXCJwYWdlLXRodW1ibmFpbFwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChwcm9wcy5zdGF0dXMgPT09IFwiZWRpdGluZ1wiKSB7XG4gICAgICAgIGNsYXNzTmFtZSA9IFwicGFnZS10aHVtYm5haWwgcGFnZS10aHVtYm5haWwtLXNoYWtpbmdcIjtcbiAgICAgICAgdXJsID0gXCJqYXZhc2NyaXB0OnZvaWQoMClcIjtcbiAgICAgICAgdGFyZ2V0ID0gXCJfc2VsZlwiO1xuICAgIH1cbiAgICBpZiAocHJvcHMuc3RhdHVzID09PSBcImVkaXRpbmdcIiAmJiBwcm9wcy5zZWxlY3RlZClcbiAgICAgICAgY2xhc3NOYW1lICs9IFwiIHBhZ2UtdGh1bWJuYWlsLS1zZWxlY3RlZFwiO1xuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogY2xhc3NOYW1lLCBvbkNsaWNrOiBwcm9wcy5vbkNsaWNrIH0sIHsgY2hpbGRyZW46IF9qc3hzKFwiYVwiLCBfX2Fzc2lnbih7IGhyZWY6IHVybCwgdGFyZ2V0OiB0YXJnZXQgfSwgeyBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwicGFnZS10aHVtYm5haWxfX3Bob3RvXCIgfSwgeyBjaGlsZHJlbjogX2pzeChcImltZ1wiLCB7IHNyYzogcHJvcHMuaW1hZ2UsIG9uRXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuc3JjID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIvaW1hZ2VzL3BhZ2VzL3BsYWNlaG9sZGVyLnN2Z1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSB9KSksIF9qc3hzKFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcInBhZ2UtdGh1bWJuYWlsX19kZXRhaWxzXCIgfSwgeyBjaGlsZHJlbjogW19qc3goXCJoNFwiLCB7IGNoaWxkcmVuOiB0aXRsZSB9KSwgX2pzeChcInBcIiwgeyBjaGlsZHJlbjogYnJpZWZEZXMgfSldIH0pKSwgX2pzeChcInNwYW5cIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwicGFnZS10aHVtYm5haWxfX3R5cGVcIiB9LCB7IGNoaWxkcmVuOiBwcm9wcy5sYWJlbCA/IHByb3BzLmxhYmVsIDogcHJvcHMudHlwZSB9KSldIH0pKSB9KSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFBhZ2VUaHVtYm5haWw7XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9hO1xuaW1wb3J0IHsgYWxlcnQsIHJlcXVlc3QsIGxvYWRpbmdNb2RhbCB9IGZyb20gXCJAcGFnc2VyL2NvbW1vblwiO1xuaW1wb3J0IHsgY3JlYXRlU2xpY2UgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xudmFyIGluaXRpYWxTdGF0ZSA9IHtcbiAgICBsb2FkaW5nOiB0cnVlLFxuICAgIGxpc3Q6IFtdLFxuICAgIHNlbGVjdGVkOiBbXSxcbiAgICBzdGF0dXM6IFwibm9ybWFsXCIsXG4gICAgc29ydEJ5OiBcImRhdGUtYWRkZWQtYXNjXCIsXG4gICAgZmlsdGVyQnk6IFwiYWxsXCIsXG59O1xuZXhwb3J0IHZhciBwYWdlc1NsaWNlID0gY3JlYXRlU2xpY2Uoe1xuICAgIG5hbWU6IFwiUGFnZXNcIixcbiAgICBpbml0aWFsU3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICByZWR1Y2Vyczoge1xuICAgICAgICBzZXRMb2FkaW5nOiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgICAgICAgc3RhdGUubG9hZGluZyA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgICB9LFxuICAgICAgICBzZXRTdGF0dXM6IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICAgICAgICBzdGF0ZS5zdGF0dXMgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgICAgICAgIHN0YXRlLnNlbGVjdGVkID0gW107XG4gICAgICAgIH0sXG4gICAgICAgIHNldFNvcnRCeTogZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgICAgIHN0YXRlLnNvcnRCeSA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgICB9LFxuICAgICAgICBzZXRGaWx0ZXJCeTogZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgICAgICAgIHN0YXRlLmZpbHRlckJ5ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNldExpc3Q6IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICAgICAgICBzdGF0ZS5saXN0ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdFBhZ2U6IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBzdGF0ZS5zZWxlY3RlZC5pbmRleE9mKGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHBhZ2UgdG8gdGhlIHNlbGVjdGVkIGxpc3RcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZWxlY3RlZC5wdXNoKGFjdGlvbi5wYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcGFnZSBmcm9tIHRoZSBzZWxlY3RlZCBsaXN0XG4gICAgICAgICAgICAgICAgc3RhdGUuc2VsZWN0ZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9LFxufSk7XG4vLyBGZXRjaCBwYWdlcyBmcm9tIHRoZSBzZXJ2ZXJcbmV4cG9ydCB2YXIgZmV0Y2hQYWdlcyA9IGZ1bmN0aW9uIChraW5kLCBmaWx0ZXJCeSwgc29ydEJ5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkaXNwYXRjaCwgZ2V0U3RhdGUpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB1cmwsIHJlc3BvbnNlO1xuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkaW5nKHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0ga2luZCA9PT0gXCJQQi1wYWdlc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFwiL3VzZXJzL1wiLmNvbmNhdCh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoXCIvXCIpWzJdLCBcIi9wYWdlc1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIi9cIi5jb25jYXQoa2luZCwgXCI/c29ydEJ5PVwiKS5jb25jYXQoc29ydEJ5LCBcIiZmaWx0ZXJCeT1cIikuY29uY2F0KGZpbHRlckJ5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVxdWVzdC5nZXQodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gKF9hLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdG9kbzogbWFrZSBpdCBzbyB0aGF0IHdlIGFsd2F5cyB1c2UgZGF0YS5wYWdlcyAqL1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRMaXN0KHJlc3BvbnNlLnJlc3VsdHMgfHwgcmVzcG9uc2UucGFnZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlckJ5KVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0RmlsdGVyQnkocmVzcG9uc2UuZmlsdGVyQnkpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvcnRCeSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKHNldFNvcnRCeShyZXNwb25zZS5zb3J0QnkpKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0TG9hZGluZyhmYWxzZSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pOyB9O1xufTtcbi8vIFNlbmRzIGEgcmVxdWVzdCB0byBzZXJ2ZXIgdG8gcmVtb3ZlIHBhZ2VzIGZyb20gYSBsaXN0LCBvciBkZWxldGUgZHJhZnQgcGFnZXNcbmV4cG9ydCB2YXIgcmVtb3ZlUGFnZXMgPSBmdW5jdGlvbiAoa2luZCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV3TGlzdDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ01vZGFsKFwiTG9hZGluZy4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVxdWVzdC5kZWxldGUoXCIvXCIuY29uY2F0KGtpbmQpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBpZHM6IGdldFN0YXRlKCkucGFnZXMuc2VsZWN0ZWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBuZXdMaXN0ID0gZ2V0U3RhdGUoKS5wYWdlcy5saXN0LmZpbHRlcihmdW5jdGlvbiAocGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFN0YXRlKCkucGFnZXMuc2VsZWN0ZWQuaW5kZXhPZihwYWdlLmlkKSA9PT0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRMaXN0KG5ld0xpc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0U3RhdHVzKFwibm9ybWFsXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ01vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnZXRTdGF0ZSgpLnNpZGVOYXYuc2VjdGlvbiA9PT0gXCJwYWdlcy9kcmFmdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIkRyYWZ0IFBhZ2Uocykgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQuXCIsIFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGFnZShzKSBzdWNjZXNzZnVsbHkgcmVtb3ZlZCBmcm9tIHlvdXIgbGlzdC5cIiwgXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7IH07XG59O1xuZXhwb3J0IHZhciBzZXRMb2FkaW5nID0gKF9hID0gcGFnZXNTbGljZS5hY3Rpb25zLCBfYS5zZXRMb2FkaW5nKSwgc2V0U3RhdHVzID0gX2Euc2V0U3RhdHVzLCBzZXRTb3J0QnkgPSBfYS5zZXRTb3J0QnksIHNldEZpbHRlckJ5ID0gX2Euc2V0RmlsdGVyQnksIHNlbGVjdFBhZ2UgPSBfYS5zZWxlY3RQYWdlLCBzZXRMaXN0ID0gX2Euc2V0TGlzdDtcbmV4cG9ydCB2YXIgc2VsZWN0TG9hZGluZyA9IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUucGFnZXMubG9hZGluZzsgfTtcbmV4cG9ydCB2YXIgc2VsZWN0U3RhdHVzID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5wYWdlcy5zdGF0dXM7IH07XG5leHBvcnQgdmFyIHNlbGVjdFNvcnRCeSA9IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUucGFnZXMuc29ydEJ5OyB9O1xuZXhwb3J0IHZhciBzZWxlY3RGaWx0ZXJCeSA9IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUucGFnZXMuZmlsdGVyQnk7IH07XG5leHBvcnQgdmFyIHNlbGVjdFNlbGVjdGVkUGFnZXMgPSBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLnBhZ2VzLnNlbGVjdGVkOyB9O1xuZXhwb3J0IHZhciBzZWxlY3RQYWdlcyA9IGZ1bmN0aW9uIChzdGF0ZSkgeyByZXR1cm4gc3RhdGUucGFnZXMubGlzdDsgfTtcbmV4cG9ydCBkZWZhdWx0IHBhZ2VzU2xpY2UucmVkdWNlcjtcbiIsImltcG9ydCB7IGNyZWF0ZVNsaWNlIH0gZnJvbSBcIkByZWR1eGpzL3Rvb2xraXRcIjtcbnZhciBpbml0aWFsU3RhdGUgPSB7XG4gICAgc2VjdGlvbjogXCJcIixcbn07XG5leHBvcnQgdmFyIHNpZGVOYXZTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgICBuYW1lOiBcInNpZGVOYXZcIixcbiAgICBpbml0aWFsU3RhdGU6IGluaXRpYWxTdGF0ZSxcbiAgICByZWR1Y2Vyczoge1xuICAgICAgICBzZXRTZWN0aW9uOiBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgICAgICAgc3RhdGUuc2VjdGlvbiA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgICB9LFxuICAgIH0sXG59KTtcbmV4cG9ydCB2YXIgc2V0U2VjdGlvbiA9IHNpZGVOYXZTbGljZS5hY3Rpb25zLnNldFNlY3Rpb247XG5leHBvcnQgdmFyIHNlbGVjdFNlY3Rpb24gPSBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLnNpZGVOYXYuc2VjdGlvbjsgfTtcbmV4cG9ydCBkZWZhdWx0IHNpZGVOYXZTbGljZS5yZWR1Y2VyO1xuIiwiaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xuaW1wb3J0IHNpZGVOYXZSZWR1Y2VyIGZyb20gXCIuL3NpZGUtbmF2L3NpZGVOYXZTbGljZVwiO1xuaW1wb3J0IHBhZ2VzUmVkdWNlciBmcm9tIFwiLi9wYWdlc1NsaWNlXCI7XG5leHBvcnQgdmFyIHN0b3JlID0gY29uZmlndXJlU3RvcmUoe1xuICAgIHJlZHVjZXI6IHtcbiAgICAgICAgc2lkZU5hdjogc2lkZU5hdlJlZHVjZXIsXG4gICAgICAgIHBhZ2VzOiBwYWdlc1JlZHVjZXIsXG4gICAgfSxcbn0pO1xuIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbnZhciBIZWFkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHVzZXJuYW1lID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsyXTtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShcIlwiKSwgc2VjdGlvbiA9IF9hWzBdLCBzZXRTZWN0aW9uID0gX2FbMV07XG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0U2VjdGlvbihnZXRTZWN0aW9uKCkpO1xuICAgIH0sIFtdKTtcbiAgICAvLyBSZXR1cm4gdGhlIGN1cnJlbnQgc2VjdGlvbiBiYXNlZCBvbiB0aGUgdXJsXG4gICAgdmFyIGdldFNlY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoXCIvXCIpWzFdID09PSBcInVzZXJzXCIpIHtcbiAgICAgICAgICAgIGlmICghd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVszXSlcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJob21lXCI7XG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVszXSA9PT0gXCJjb2xsZWN0aW9uc1wiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbGxlY3Rpb25zXCI7XG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVszXSA9PT0gXCJwYWdlc1wiKVxuICAgICAgICAgICAgICAgIHJldHVybiBcInBhZ2VzXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwibGluZWQtYnRucy0yXCIgfSwgeyBjaGlsZHJlbjogW19qc3goTGluaywgX19hc3NpZ24oeyB0bzogXCIvdXNlcnMvXCIuY29uY2F0KHVzZXJuYW1lLCBcIi9cIiksIGNsYXNzTmFtZTogXCJidG4tbGluZWQgXCIuY29uY2F0KHNlY3Rpb24gPT09IFwiaG9tZVwiID8gXCJidG4tbGluZWQtLWFjdGl2ZVwiIDogXCJcIiksIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFNlY3Rpb24oXCJob21lXCIpOyB9IH0sIHsgY2hpbGRyZW46IFwiSG9tZVwiIH0pKSwgX2pzeChMaW5rLCBfX2Fzc2lnbih7IHRvOiBcIi91c2Vycy9cIi5jb25jYXQodXNlcm5hbWUsIFwiL3BhZ2VzXCIpLCBjbGFzc05hbWU6IFwiYnRuLWxpbmVkIFwiLmNvbmNhdChzZWN0aW9uID09PSBcInBhZ2VzXCIgPyBcImJ0bi1saW5lZC0tYWN0aXZlXCIgOiBcIlwiKSwgb25DbGljazogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0U2VjdGlvbihcInBhZ2VzXCIpOyB9IH0sIHsgY2hpbGRyZW46IFwiUGFnZXNcIiB9KSksIF9qc3goTGluaywgX19hc3NpZ24oeyB0bzogXCIvdXNlcnMvXCIuY29uY2F0KHVzZXJuYW1lLCBcIi9jb2xsZWN0aW9uc1wiKSwgY2xhc3NOYW1lOiBcImJ0bi1saW5lZCBcIi5jb25jYXQoc2VjdGlvbiA9PT0gXCJjb2xsZWN0aW9uc1wiID8gXCJidG4tbGluZWQtLWFjdGl2ZVwiIDogXCJcIiksIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldFNlY3Rpb24oXCJjb2xsZWN0aW9uc1wiKTsgfSB9LCB7IGNoaWxkcmVuOiBcIkNvbGxlY3Rpb25zXCIgfSkpXSB9KSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IEhlYWRlcjtcbiIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xudmFyIEhvbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIChfanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcInBiLW1haW5cIiB9LCB7IGNoaWxkcmVuOiBfanN4KFwiaDNcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiaGVhZGluZy10ZXJ0aWFyeSBjZW50ZXItY29udGVudCBpdGFsaWNcIiB9LCB7IGNoaWxkcmVuOiBcIlRoaXMgcGFydCB3aWxsIGJlIGNvbXBsZXRlZCBzaG9ydGx5IVwiIH0pKSB9KSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IEhvbWU7XG4iLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFBhZ2VUaHVtYm5haWwgZnJvbSBcIi4uLy4uL3BhcnRpYWxzL1BhZ2VUaHVtYm5haWxcIjtcbmltcG9ydCB7IExvYWRpbmcgfSBmcm9tIFwiQHBhZ3Nlci9yZXVzYWJsZVwiO1xuaW1wb3J0IHsgZmV0Y2hQYWdlcywgc2VsZWN0UGFnZXMsIHNlbGVjdExvYWRpbmcgfSBmcm9tIFwiLi4vbGlicmFyeS9wYWdlc1NsaWNlXCI7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcbnZhciBQYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbG9hZGluZyA9IHVzZVNlbGVjdG9yKHNlbGVjdExvYWRpbmcpO1xuICAgIHZhciBwYWdlcyA9IHVzZVNlbGVjdG9yKHNlbGVjdFBhZ2VzKTtcbiAgICB2YXIgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRpc3BhdGNoKGZldGNoUGFnZXMoXCJQQi1wYWdlc1wiKSk7XG4gICAgfSwgW10pO1xuICAgIHZhciByZW5kZXJQYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGxvYWRpbmcpXG4gICAgICAgICAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiY2VudGVyLWNvbnRlbnRcIiB9LCB7IGNoaWxkcmVuOiBfanN4KExvYWRpbmcsIHt9KSB9KSkpO1xuICAgICAgICBpZiAocGFnZXMgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiY2VudGVyLWNvbnRlbnRcIiB9LCB7IGNoaWxkcmVuOiBfanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcImEtMTRcIiB9LCB7IGNoaWxkcmVuOiBcIlVzZXIgZG9lc24ndCBoYXZlIGFueSBwdWJsaWMgcGFnZS5cIiB9KSkgfSkpKTtcbiAgICAgICAgLyoqIEB0b2RvOiBmaXggdGhlIGFueSB0eXBlICovXG4gICAgICAgIHJldHVybiBwYWdlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiAoX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJjb2wtbGctMS1vZi01IGNvbC1tZC0xLW9mLTUgY29sLXNtLTEtb2YtMyBjb2wteHMtMS1vZi0yIGNvbC14eHMtMS1vZi0xXCIgfSwgeyBjaGlsZHJlbjogX2pzeChQYWdlVGh1bWJuYWlsLCB7IHN0YXR1czogXCJub3JtYWxcIiwgaWQ6IGl0ZW0uaWQsIGJyaWVmRGVzOiBpdGVtLmJyaWVmRGVzLCB0aXRsZTogaXRlbS50aXRsZSwgaW1hZ2U6IGl0ZW0ucGhvdG8sIHRhcmdldDogXCJfYmxhbmtcIiwgdXJsOiBpdGVtLnVybCwgdHlwZTogXCJwdWJsaWNcIiwgbGFiZWw6IGl0ZW0uZGF0ZSB9KSB9KSwgaXRlbS5pZCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiAoX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJwYi1tYWluXCIgfSwgeyBjaGlsZHJlbjogX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJyb3dcIiB9LCB7IGNoaWxkcmVuOiByZW5kZXJQYWdlcygpIH0pKSB9KSkpO1xufTtcbmV4cG9ydCBkZWZhdWx0IFBhZ2VzO1xuIiwidmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gXCJAcGFnc2VyL2NvbW1vblwiO1xuaW1wb3J0IHsgTG9hZGluZyB9IGZyb20gXCJAcGFnc2VyL3JldXNhYmxlXCI7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tIFwiLi4vLi4vcGFydGlhbHMvQ29sbGVjdGlvblRodW1ibmFpbFwiO1xudmFyIENvbGxlY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfYSA9IHVzZVN0YXRlKFtdKSwgY29sbGVjdGlvbnMgPSBfYVswXSwgc2V0Q29sbGVjdGlvbnMgPSBfYVsxXTtcbiAgICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBmZXRjaENvbGxlY3Rpb25zKCk7XG4gICAgfSwgW10pO1xuICAgIC8vIFNlbmQgYSByZXF1ZXN0IHRvIGZldGNoIHRoZSBsaXN0IG9mIGNvbGxlY3Rpb25zXG4gICAgdmFyIGZldGNoQ29sbGVjdGlvbnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzcG9uc2U7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcXVlc3QuZ2V0KFwiL2NvbGxlY3Rpb25zL3NoYXJlZC9cIi5jb25jYXQod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKVsyXSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGg6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gKF9hLnNlbnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHNldENvbGxlY3Rpb25zKHJlc3BvbnNlLmNvbGxlY3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTsgfTtcbiAgICAvLyBSZW5kZXIgbGlzdCBvZiBjb2xsZWN0aW9uc1xuICAgIHZhciByZW5kZXJDb2xsZWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb25zID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIChfanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcImNlbnRlci1jb250ZW50XCIgfSwgeyBjaGlsZHJlbjogX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJhLTE0XCIgfSwgeyBjaGlsZHJlbjogXCJVc2VyIGhhc24ndCBzaGFyZWQgYW55IGNvbGxlY3Rpb24uXCIgfSkpIH0pKSk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiY2VudGVyLWNvbnRlbnRcIiB9LCB7IGNoaWxkcmVuOiBfanN4KExvYWRpbmcsIHt9KSB9KSkpO1xuICAgICAgICByZXR1cm4gY29sbGVjdGlvbnMubWFwKGZ1bmN0aW9uIChjbCkge1xuICAgICAgICAgICAgcmV0dXJuIChfanN4KFwiZGl2XCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcImNvbC1sZy0xLW9mLTUgY29sLW1kLTEtb2YtNSBjb2wtc20tMS1vZi0zIGNvbC14cy0xLW9mLTIgY29sLXh4cy0xLW9mLTFcIiB9LCB7IGNoaWxkcmVuOiBfanN4KENvbGxlY3Rpb24sIHsgaWQ6IGNsLl9pZCwgbmFtZTogY2wubmFtZSwgaW1nOiBjbC5waG90by5zZWN1cmVfdXJsLCBkZXNjOiBjbC5kZXNjcmlwdGlvbiwgcGFnZU51bTogY2wucGFnZXMubGVuZ3RoLCBhdXRob3I6IGNsLnVzZXIubmFtZSwgcmVmcmVzaDogdHJ1ZSwgdGFyZ2V0OiBcIl9ibGFua1wiIH0pIH0pLCBjbC5faWQpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gKF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwicGItbWFpblwiIH0sIHsgY2hpbGRyZW46IF9qc3goXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwicm93XCIgfSwgeyBjaGlsZHJlbjogcmVuZGVyQ29sbGVjdGlvbnMoKSB9KSkgfSkpKTtcbn07XG5leHBvcnQgZGVmYXVsdCBDb2xsZWN0aW9ucztcbiIsInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5pbXBvcnQgeyBqc3ggYXMgX2pzeCwganN4cyBhcyBfanN4cyB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuaW1wb3J0IHsgUm91dGUsIFJvdXRlcywgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsIH0gZnJvbSBcInJlYWN0LXJvdXRlci1kb21cIjtcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gXCIuLi9saWJyYXJ5L3N0b3JlXCI7XG5pbXBvcnQgSGVhZGVyIGZyb20gXCIuL0hlYWRlclwiO1xuaW1wb3J0IEhvbWUgZnJvbSBcIi4vSG9tZVwiO1xuaW1wb3J0IFBhZ2VzIGZyb20gXCIuL1BhZ2VzXCI7XG5pbXBvcnQgQ29sbGVjdGlvbnMgZnJvbSBcIi4vQ29sbGVjdGlvbnNcIjtcbmZ1bmN0aW9uIFB1YmxpY1Byb2ZpbGUoKSB7XG4gICAgcmV0dXJuIChfanN4KFByb3ZpZGVyLCBfX2Fzc2lnbih7IHN0b3JlOiBzdG9yZSB9LCB7IGNoaWxkcmVuOiBfanN4cyhSb3V0ZXIsIHsgY2hpbGRyZW46IFtfanN4KEhlYWRlciwge30pLCBfanN4cyhSb3V0ZXMsIHsgY2hpbGRyZW46IFtfanN4KFJvdXRlLCB7IHBhdGg6IFwiL3VzZXJzLzp1c2VybmFtZS9wYWdlc1wiLCBlbGVtZW50OiBfanN4KFBhZ2VzLCB7fSkgfSksIF9qc3goUm91dGUsIHsgcGF0aDogXCIvdXNlcnMvOnVzZXJuYW1lL2NvbGxlY3Rpb25zXCIsIGVsZW1lbnQ6IF9qc3goQ29sbGVjdGlvbnMsIHt9KSB9KSwgX2pzeChSb3V0ZSwgeyBwYXRoOiBcIi91c2Vycy86dXNlcm5hbWVcIiwgZWxlbWVudDogX2pzeChIb21lLCB7fSkgfSldIH0pXSB9KSB9KSkpO1xufVxuZXhwb3J0IGRlZmF1bHQgUHVibGljUHJvZmlsZTtcbiJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwicHJvcHMiLCJudW1UZXh0IiwicGFnZU51bSIsImNvbmNhdCIsImNvbnRlbnQiLCJjaGlsZHJlbiIsImNsYXNzTmFtZSIsInNyYyIsImltZyIsIm9uRXJyb3IiLCJlIiwidGFyZ2V0IiwibmFtZSIsImRlc2MiLCJhdXRob3IiLCJvbkNsaWNrIiwicmVmcmVzaCIsImhyZWYiLCJpZCIsInRvIiwibm9QaG90byIsImJyaWVmRGVzXzEiLCJicmllZkRlcyIsInRpdGxlXzEiLCJ0aXRsZSIsInVybF8xIiwiY2xhc3NOYW1lXzEiLCJ0YXJnZXRfMSIsInN1YnN0cmluZyIsInR5cGUiLCJzdGF0dXMiLCJzZWxlY3RlZCIsImxhYmVsIiwidXJsIiwiYXV0aG9yVXNlcm5hbWUiLCJpbWFnZSIsIl9hIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwiZyIsIl8iLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJwYWdlc1NsaWNlIiwiaW5pdGlhbFN0YXRlIiwibG9hZGluZyIsImxpc3QiLCJzb3J0QnkiLCJmaWx0ZXJCeSIsInJlZHVjZXJzIiwic2V0TG9hZGluZyIsInN0YXRlIiwiYWN0aW9uIiwicGF5bG9hZCIsInNldFN0YXR1cyIsInNldFNvcnRCeSIsInNldEZpbHRlckJ5Iiwic2V0TGlzdCIsInNlbGVjdFBhZ2UiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJmZXRjaFBhZ2VzIiwia2luZCIsImRpc3BhdGNoIiwiZ2V0U3RhdGUiLCJyZXNwb25zZSIsIndpbmRvdyIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJzcGxpdCIsInJlcXVlc3QiLCJhdXRoIiwicmVzdWx0cyIsInBhZ2VzIiwicmVtb3ZlUGFnZXMiLCJuZXdMaXN0IiwibG9hZGluZ01vZGFsIiwiZGF0YSIsImlkcyIsImZpbHRlciIsInBhZ2UiLCJzaWRlTmF2Iiwic2VjdGlvbiIsImFsZXJ0IiwiYWN0aW9ucyIsInNlbGVjdExvYWRpbmciLCJzZWxlY3RTdGF0dXMiLCJzZWxlY3RTb3J0QnkiLCJzZWxlY3RGaWx0ZXJCeSIsInNlbGVjdFNlbGVjdGVkUGFnZXMiLCJzZWxlY3RQYWdlcyIsInNpZGVOYXZTbGljZSIsInNldFNlY3Rpb24iLCJzZWxlY3RTZWN0aW9uIiwic3RvcmUiLCJyZWR1Y2VyIiwidXNlcm5hbWUiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImdldFNlY3Rpb24iLCJMb2FkaW5nIiwibWFwIiwiaXRlbSIsIlBhZ2VUaHVtYm5haWwiLCJwaG90byIsImRhdGUiLCJjb2xsZWN0aW9ucyIsInNldENvbGxlY3Rpb25zIiwiZmV0Y2hDb2xsZWN0aW9ucyIsImNsIiwiX2lkIiwic2VjdXJlX3VybCIsImRlc2NyaXB0aW9uIiwidXNlciIsInBhdGgiLCJlbGVtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==