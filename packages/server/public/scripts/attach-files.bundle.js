"use strict";(self.webpackChunk_pagser_web=self.webpackChunk_pagser_web||[]).push([[84],{6367:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});var a=t(2322),o=t(2784),r=t(5185),c=t(8229),l=t(7289),i=t(98),s=t(4604),u=function(){return u=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},u.apply(this,arguments)};const f=function(){var e=(0,o.useState)(!1),n=e[0],t=e[1],f=(0,o.useState)(!1),h=f[0],d=f[1],p=(0,o.useState)(""),m=p[0],v=p[1],b=(0,o.useState)(""),x=b[0],w=b[1],y=(0,r.v9)(i.pW),g=(0,r.v9)(s.mW),j=(0,r.v9)(i.NH),k=(0,r.v9)(i.P8),N=(0,r.I0)();return j?(0,a.jsx)("div",{}):(0,a.jsxs)("div",u({className:"page__attach-files"},{children:[(0,a.jsx)(l.ConfirmModal,u({header:"Remove the attach file",open:h,onConfirm:function(){return e=void 0,n=void 0,a=function(){return function(e,n){var t,a,o,r,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,a=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){c.label=r[1];break}if(6===r[0]&&c.label<o[1]){c.label=o[1],o=r;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(r);break}o[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(e,c)}catch(e){r=[6,e],a=0}finally{t=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(e){switch(e.label){case 0:return d(!1),(0,c.loadingModal)("Deleting the attach file..."),[4,c.request.delete("/pages/".concat(y,"/attach-files/").concat(m),{auth:!0})];case 1:return e.sent(),N((0,i.Xo)("File deleted successfully.")),[2]}}))},new((t=void 0)||(t=Promise))((function(o,r){function c(e){try{i(a.next(e))}catch(e){r(e)}}function l(e){try{i(a.throw(e))}catch(e){r(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,l)}i((a=a.apply(e,n||[])).next())}));var e,n,t,a},onCancel:function(){return d(!1)}},{children:(0,a.jsxs)("p",{children:["Are you sure that you want to delete this attach file"," ",(0,a.jsxs)("strong",{children:["'",x,"'"]}),"? Action cannot be undone."]})})),(0,a.jsx)("div",u({className:"file-links"},{children:"owner"===g?k.map((function(e){return(0,a.jsxs)("a",u({className:"file-link",href:"/api/pages/".concat(y,"/attach-files/").concat(e.name)},{children:[(0,a.jsx)("i",{className:"fa fa-download"})," "+e.name,(0,a.jsx)("button",u({className:"btn-i",onClick:function(n){n.preventDefault(),v(e._id),w(e.name),d(!0)}},{children:(0,a.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})}))]}),e.name)})):k.map((function(e){return(0,a.jsxs)("a",u({className:"file-link",href:"/api/pages/".concat(y,"/attach-files/").concat(e.name)},{children:[(0,a.jsx)("i",{className:"fa fa-download"})," "+e.name]}),e.name)}))})),"owner"===g&&k.length<5?(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)(l.Button,u({color:"blue",size:"small",rounded:!0,onClick:function(){t(!0)}},{children:[(0,a.jsx)("i",{className:"fa fa-upload button__icon-left"})," Add an Attach File"]})),(0,a.jsx)(l.UploadAttachFile,{open:n,header:"Add an Attach File",text:"You can upload maximum of 5 files 10MB each for every page.",size:1e7,url:"/pages/".concat(y,"/attach-files"),success:function(){N((0,i.Xo)("File uploaded successfully."))},onClose:function(){t(!1)}})]}):(0,a.jsx)("div",{}),5===k.length&&"owner"===g&&(0,a.jsx)("em",{children:"You can only have 5 attach files for each page, if you want to upload a new one remove one of the attach files first."})]}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vQHBhZ3Nlci93ZWIvLi9zcmMvdmlld3Mvc2hvdy1wYWdlL0F0dGFjaEZpbGVzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgcmVxdWVzdCwgbG9hZGluZ01vZGFsIH0gZnJvbSBcIkBwYWdzZXIvY29tbW9uXCI7XG5pbXBvcnQgeyBDb25maXJtTW9kYWwsIFVwbG9hZEF0dGFjaEZpbGUsIEJ1dHRvbiB9IGZyb20gXCJAcGFnc2VyL3JldXNhYmxlXCI7XG5pbXBvcnQgeyBmZXRjaEF0dGFjaEZpbGVzLCBzZWxlY3RMb2FkaW5nLCBzZWxlY3RJZCwgc2VsZWN0QXR0YWNoRmlsZXMsIH0gZnJvbSBcIi4vcGFnZVNsaWNlXCI7XG5pbXBvcnQgeyBzZWxlY3RTdGF0dXMgfSBmcm9tIFwiLi91c2VyU2xpY2VcIjtcbnZhciBBdHRhY2hGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShmYWxzZSksIHVwbG9hZEF0dGFjaEZpbGVzTW9kYWxPcGVuID0gX2FbMF0sIHNldFVwbG9hZEF0dGFjaEZpbGVzTW9kYWxPcGVuID0gX2FbMV07XG4gICAgdmFyIF9iID0gdXNlU3RhdGUoZmFsc2UpLCBjb25maXJtTW9kYWxPcGVuID0gX2JbMF0sIHNldENvbmZpcm1Nb2RhbE9wZW4gPSBfYlsxXTtcbiAgICB2YXIgX2MgPSB1c2VTdGF0ZShcIlwiKSwgY29uZmlybU1vZGFsRmlsZUlkID0gX2NbMF0sIHNldENvbmZpcm1Nb2RhbEZpbGVJZCA9IF9jWzFdO1xuICAgIHZhciBfZCA9IHVzZVN0YXRlKFwiXCIpLCBjb25maXJtTW9kYWxGaWxlTmFtZSA9IF9kWzBdLCBzZXRDb25maXJtTW9kYWxGaWxlTmFtZSA9IF9kWzFdO1xuICAgIHZhciBwYWdlSWQgPSB1c2VTZWxlY3RvcihzZWxlY3RJZCk7XG4gICAgdmFyIHN0YXR1cyA9IHVzZVNlbGVjdG9yKHNlbGVjdFN0YXR1cyk7XG4gICAgdmFyIGxvYWRpbmcgPSB1c2VTZWxlY3RvcihzZWxlY3RMb2FkaW5nKTtcbiAgICB2YXIgYXR0YWNoRmlsZXMgPSB1c2VTZWxlY3RvcihzZWxlY3RBdHRhY2hGaWxlcyk7XG4gICAgdmFyIGRpc3BhdGNoID0gdXNlRGlzcGF0Y2goKTtcbiAgICAvLyBSZW5kZXIgYWxsIGF0dGFjaCBmaWxlcyBvZiB0aGUgcGFnZVxuICAgIHZhciByZW5kZXJGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gXCJvd25lclwiKVxuICAgICAgICAgICAgLy8gSWYgdXNlciBpcyB0aGUgb3duZXIgb2YgdGhlIHBhZ2VcbiAgICAgICAgICAgIHJldHVybiBhdHRhY2hGaWxlcy5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKFwiYVwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJmaWxlLWxpbmtcIiwgaHJlZjogXCIvYXBpL3BhZ2VzL1wiLmNvbmNhdChwYWdlSWQsIFwiL2F0dGFjaC1maWxlcy9cIikuY29uY2F0KGZpbGUubmFtZSkgfSwgeyBjaGlsZHJlbjogW19qc3goXCJpXCIsIHsgY2xhc3NOYW1lOiBcImZhIGZhLWRvd25sb2FkXCIgfSksIFwiIFwiICsgZmlsZS5uYW1lLCBfanN4KFwiYnV0dG9uXCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcImJ0bi1pXCIsIG9uQ2xpY2s6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBwcmV2ZW50IHRoZSBmaWxlIGZyb20gc3RhcnRpbmcgdG8gZ2V0IGRvd25sb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb25maXJtTW9kYWxGaWxlSWQoZmlsZS5faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb25maXJtTW9kYWxGaWxlTmFtZShmaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb25maXJtTW9kYWxPcGVuKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSwgeyBjaGlsZHJlbjogX2pzeChcImlcIiwgeyBjbGFzc05hbWU6IFwiZmEgZmEtdGltZXNcIiwgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIiB9KSB9KSldIH0pLCBmaWxlLm5hbWUpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBJZiB1c2VyIGlzIG5vdCB0aGUgb3duZXIgb2YgdGhlIHBhZ2VcbiAgICAgICAgcmV0dXJuIGF0dGFjaEZpbGVzLm1hcChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIChfanN4cyhcImFcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwiZmlsZS1saW5rXCIsIGhyZWY6IFwiL2FwaS9wYWdlcy9cIi5jb25jYXQocGFnZUlkLCBcIi9hdHRhY2gtZmlsZXMvXCIpLmNvbmNhdChmaWxlLm5hbWUpIH0sIHsgY2hpbGRyZW46IFtfanN4KFwiaVwiLCB7IGNsYXNzTmFtZTogXCJmYSBmYS1kb3dubG9hZFwiIH0pLCBcIiBcIiArIGZpbGUubmFtZV0gfSksIGZpbGUubmFtZSkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFwiXCI7XG4gICAgLy8gUmVuZGVyIHRoZSBhZGQgYW4gYXR0YWNoIGZpbGUgYnV0dG9uXG4gICAgdmFyIHJlbmRlckJ1dHRvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gXCJvd25lclwiICYmIGF0dGFjaEZpbGVzLmxlbmd0aCA8IDUpXG4gICAgICAgICAgICAvLyBJZiB1c2VyIGlzIHRoZSBvd25lciBvZiB0aGUgcGFnZVxuICAgICAgICAgICAgcmV0dXJuIChfanN4cyhSZWFjdC5GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3hzKEJ1dHRvbiwgX19hc3NpZ24oeyBjb2xvcjogXCJibHVlXCIsIHNpemU6IFwic21hbGxcIiwgcm91bmRlZDogdHJ1ZSwgb25DbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVwbG9hZEF0dGFjaEZpbGVzTW9kYWxPcGVuKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSB9LCB7IGNoaWxkcmVuOiBbX2pzeChcImlcIiwgeyBjbGFzc05hbWU6IFwiZmEgZmEtdXBsb2FkIGJ1dHRvbl9faWNvbi1sZWZ0XCIgfSksIFwiIEFkZCBhbiBBdHRhY2ggRmlsZVwiXSB9KSksIF9qc3goVXBsb2FkQXR0YWNoRmlsZSwgeyBvcGVuOiB1cGxvYWRBdHRhY2hGaWxlc01vZGFsT3BlbiwgaGVhZGVyOiBcIkFkZCBhbiBBdHRhY2ggRmlsZVwiLCB0ZXh0OiBcIllvdSBjYW4gdXBsb2FkIG1heGltdW0gb2YgNSBmaWxlcyAxME1CIGVhY2ggZm9yIGV2ZXJ5IHBhZ2UuXCIsIHNpemU6IDEwMDAwMDAwLCB1cmw6IFwiL3BhZ2VzL1wiLmNvbmNhdChwYWdlSWQsIFwiL2F0dGFjaC1maWxlc1wiKSwgc3VjY2VzczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGZldGNoQXR0YWNoRmlsZXMoXCJGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseS5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgb25DbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFVwbG9hZEF0dGFjaEZpbGVzTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gfSldIH0pKTtcbiAgICAgICAgLy8gSWYgdmlld2VyIGlzIG5vdCB0aGUgb3duZXIgb2YgdGhlIHBhZ2UganVzdCByZXR1cm4gYSBzaW1wbGUgZGl2XG4gICAgICAgIHJldHVybiBfanN4KFwiZGl2XCIsIHt9KTtcbiAgICB9O1xuICAgIGlmIChsb2FkaW5nKVxuICAgICAgICByZXR1cm4gX2pzeChcImRpdlwiLCB7fSk7XG4gICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJwYWdlX19hdHRhY2gtZmlsZXNcIiB9LCB7IGNoaWxkcmVuOiBbX2pzeChDb25maXJtTW9kYWwsIF9fYXNzaWduKHsgaGVhZGVyOiBcIlJlbW92ZSB0aGUgYXR0YWNoIGZpbGVcIiwgb3BlbjogY29uZmlybU1vZGFsT3Blbiwgb25Db25maXJtOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDb25maXJtTW9kYWxPcGVuKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ01vZGFsKFwiRGVsZXRpbmcgdGhlIGF0dGFjaCBmaWxlLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXF1ZXN0LmRlbGV0ZShcIi9wYWdlcy9cIi5jb25jYXQocGFnZUlkLCBcIi9hdHRhY2gtZmlsZXMvXCIpLmNvbmNhdChjb25maXJtTW9kYWxGaWxlSWQpLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goZmV0Y2hBdHRhY2hGaWxlcyhcIkZpbGUgZGVsZXRlZCBzdWNjZXNzZnVsbHkuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTsgfSwgb25DYW5jZWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldENvbmZpcm1Nb2RhbE9wZW4oZmFsc2UpOyB9IH0sIHsgY2hpbGRyZW46IF9qc3hzKFwicFwiLCB7IGNoaWxkcmVuOiBbXCJBcmUgeW91IHN1cmUgdGhhdCB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBhdHRhY2ggZmlsZVwiLCBcIiBcIiwgX2pzeHMoXCJzdHJvbmdcIiwgeyBjaGlsZHJlbjogW1wiJ1wiLCBjb25maXJtTW9kYWxGaWxlTmFtZSwgXCInXCJdIH0pLCBcIj8gQWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUuXCJdIH0pIH0pKSwgX2pzeChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJmaWxlLWxpbmtzXCIgfSwgeyBjaGlsZHJlbjogcmVuZGVyRmlsZXMoKSB9KSksIHJlbmRlckJ1dHRvbigpLCBhdHRhY2hGaWxlcy5sZW5ndGggPT09IDUgJiYgc3RhdHVzID09PSBcIm93bmVyXCIgJiYgKF9qc3goXCJlbVwiLCB7IGNoaWxkcmVuOiBcIllvdSBjYW4gb25seSBoYXZlIDUgYXR0YWNoIGZpbGVzIGZvciBlYWNoIHBhZ2UsIGlmIHlvdSB3YW50IHRvIHVwbG9hZCBhIG5ldyBvbmUgcmVtb3ZlIG9uZSBvZiB0aGUgYXR0YWNoIGZpbGVzIGZpcnN0LlwiIH0pKV0gfSkpKTtcbn07XG5leHBvcnQgZGVmYXVsdCBBdHRhY2hGaWxlcztcbiJdLCJuYW1lcyI6WyJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwiX2EiLCJ1c2VTdGF0ZSIsInVwbG9hZEF0dGFjaEZpbGVzTW9kYWxPcGVuIiwic2V0VXBsb2FkQXR0YWNoRmlsZXNNb2RhbE9wZW4iLCJfYiIsImNvbmZpcm1Nb2RhbE9wZW4iLCJzZXRDb25maXJtTW9kYWxPcGVuIiwiX2MiLCJjb25maXJtTW9kYWxGaWxlSWQiLCJzZXRDb25maXJtTW9kYWxGaWxlSWQiLCJfZCIsImNvbmZpcm1Nb2RhbEZpbGVOYW1lIiwic2V0Q29uZmlybU1vZGFsRmlsZU5hbWUiLCJwYWdlSWQiLCJzdGF0dXMiLCJsb2FkaW5nIiwiYXR0YWNoRmlsZXMiLCJkaXNwYXRjaCIsImNsYXNzTmFtZSIsImNoaWxkcmVuIiwiQ29uZmlybU1vZGFsIiwiaGVhZGVyIiwib3BlbiIsIm9uQ29uZmlybSIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwibmV4dCIsInZlcmIiLCJTeW1ib2wiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsImRvbmUiLCJ2YWx1ZSIsInBvcCIsInB1c2giLCJlIiwic3RlcCIsIl9fZ2VuZXJhdG9yIiwibG9hZGluZ01vZGFsIiwicmVxdWVzdCIsImNvbmNhdCIsImF1dGgiLCJQIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInJlc3VsdCIsInRoZW4iLCJvbkNhbmNlbCIsIm1hcCIsImZpbGUiLCJocmVmIiwibmFtZSIsIm9uQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsIl9pZCIsIkJ1dHRvbiIsImNvbG9yIiwic2l6ZSIsInJvdW5kZWQiLCJVcGxvYWRBdHRhY2hGaWxlIiwidGV4dCIsInVybCIsInN1Y2Nlc3MiLCJvbkNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==